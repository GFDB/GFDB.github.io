// JavaScript Document
// disc
var c=[0,0,1,3,6,10,15,21,28,36,45,55,66,78,91,105,120,136,153,171,190,210,231,253,276,300,325,351,379,410,444,486,532,582,636,694,757,824,896,973,1055,1143,1236,1335,1440,1551,1669,1794,1925,2064,2210,2364,2525,2694,2872,3058,3253,3457,3670,3893,4126,4369,4622,4885,5159,5444,5740,6048,6368,6700,7044,7495,7963,8449,8953,9475,10015,10574,11153,11751,12369,13008,13668,14349,15052,15778,16526,17297,18092,18911,19754,20880,22041,23236,24467,25734,27038,28379,29758,31176,32633,33633,34833,36233,37833,39633,41633,43833,46233,49033,52633,57433,63833,72833,84833,100833,122833,152833,192833,242833,302833];document.getElementById("nlv").addEventListener("keyup",e);document.getElementById("tlv").addEventListener("keyup",e);document.getElementById("o").addEventListener("change",e);function e(){var	a=Number(document.getElementById("nlv").value),b=Number(document.getElementById("tlv").value),f=document.getElementById("o").checked+1,d=0;0<=c[a+1]-c[a]&&b>a&&(115<b&&(d+=Math.ceil((c[b]-c[115<a?a:115])/(30*f)),b=115),110<b&&115>a&&(d+=Math.ceil((c[b]-c[110<a?a:110])/(30*f)),b=110),100<b&&110>a&&(d+=Math.ceil((c[b]-c[100<a?a:1])/(30*f)),b=1),100>=b&&100>a&&(d+=Math.ceil((c[b]-c[a])/30)),document.getElementById("rrst").innerText="\uc791\uc804\ubcf4\uace0\uc11c "+d+"\uac1c \ud544\uc694")};
// enhanced
var HG={avg:[.21,.25,.35,.24],M1911:[.2,.2323,.3176,.2426],"\ub098\uac15 \ub9ac\ubcfc\ubc84":[.2164,.2323,.3667,.1944],P38:[.2,.2323,.3429,.2426],"FNP-9":[.2164,.2625,.3667,.2625],PPK:[.183,.263,.389,.263],"MP-446":[.2164,.2625,.3176,.2526],"Bren Ten":[.2323,.2625,.3176,.2526],"USP Compact":[.1831,.2909,.3667,.2722]},SMG={avg:[.21,.09,.32,.31],M3:[.2164,.0889,.3176,.2816],"PPSh-41":[.2,.0889,.2909,.3628],PP2000:[.2323,.0889,.3667,.3304],"MP-40":[.2164,.0889,.2909,.3089],"\ubca0\ub808\ud0c038\ud615":[.2323,.0889,.2625,.3089],m45:[.2323,.0889,.3176,.3089],"Spectre M4":[.2,.0889,.3429,.3549],IDW:[.1831,.0889,.3429,.2955],"64\uc2dd":[.2164,.0889,.3176,.3628]},RF={avg:[.54,.31,.18,.17],"SVT-38":[.526,.291,.2,.166],G43:[.541,.291,.166,.183],"\uc2dc\ubaa8\ub178\ud504":[.5258,.2909,.2,.1655],"FN-49":[.5407,.2909,.1655,.1535],BM59:[.5548,.2909,.1655,.1831]},AR={avg:[.32,.21,.2,.27],G3:[.3781,.2323,.2,.2576],L85A1:[.3304,.2,.2,.2674],"\uac08\ub9b4":[.3176,.2,.2,.3089],"SIG-510":[.3781,.2,.2,.2476],F2000:[.3176,.2323,.2323,.3304],"63\uc2dd":[.3667,.2,.2,.3]},MG={avg:[.48,.15,.17,.41],LWMMG:[.5258,.1655,.1655,.3628],DP28:[.4593,.1655,.1655,.4035],MG34:[.4683,.1286,.1655,.4275],FG42:[.4683,.1655,.2,.4275],"AAT-52":[.4857,.1655,.1655,.4405]};function getOneTypeCount(b,c){count=[0,0,0,0];for(var a=0;4>a;a++)count[a]=Math.ceil(b[a]/c[a]);return max=Math.max.apply(Math,count)}function getFinalValue(b,c){final=[0,0,0,0];for(var a=0;4>a;a++)final[a]=Math.floor(b*c[a]);return final}
$("#stat").on("submit",()=>{$("#result").html("<thead><tr><th>\uba85\uce6d</th><th>소모량</th><th>\uc2a4\ud0ef\uc0c1\uc2b9\uc608\uce21\ub7c9</th></tr></thead><tbody></tbody>");arr=[$("#atk").val(),$("#hit").val(),$("#dod").val(),$("#spd").val()];for(i in HG)num=getOneTypeCount(arr,HG[i]),result=getFinalValue(num,HG[i]),"avg"==i?$("#result").append("<tr><td><img src=\"img/etc/hg.png\"></td><td>"+num+"</td><td><img src=\"img/etc/Icon_dmg_b.png\" style=\"width:5%\">\ud654\ub825:"+result[0]+"<img src=\"img/etc/Icon_eva_b.png\" style=\"width:5%\">\ud68c\ud53c:"+result[2]+"<img src=\"img/etc/Icon_acc_b.png\" style=\"width:5%\">\uba85\uc911:"+result[1]+"<img src=\"img/etc/Icon_rof_b.png\" style=\"width:5%\">\uc0ac\uc18d:"+result[3]+"</td></tr>"):$("#result").append("<tr><td>"+i+"</td><td>"+num+"</td><td><img src=\"img/etc/Icon_dmg.png\" style=\"width:5%\">:"+result[0]+"<img src=\"img/etc/Icon_eva.png\" style=\"width:5%\">:"+result[2]+"<img src=\"img/etc/Icon_acc.png\" style=\"width:5%\">:"+result[1]+"<img src=\"img/etc/Icon_rof.png\" style=\"width:5%\">:"+result[3]+"</td></tr>");for(i in SMG)num=getOneTypeCount(arr,SMG[i]),result=getFinalValue(num,SMG[i]),"avg"==i?$("#result").append("<tr><td><img src=\"img/etc/smg.png\"></td><td>"+num+"</td><td><img src=\"img/etc/Icon_dmg_b.png\" style=\"width:5%\">\ud654\ub825:"+result[0]+"<img src=\"img/etc/Icon_eva_b.png\" style=\"width:5%\">\ud68c\ud53c:"+result[2]+"<img src=\"img/etc/Icon_acc_b.png\" style=\"width:5%\">\uba85\uc911:"+result[1]+"<img src=\"img/etc/Icon_rof_b.png\" style=\"width:5%\">\uc0ac\uc18d:"+result[3]+"</td></tr>"):$("#result").append("<tr><td>"+i+"</td><td>"+num+"</td><td><img src=\"img/etc/Icon_dmg.png\" style=\"width:5%\">:"+result[0]+"<img src=\"img/etc/Icon_eva.png\" style=\"width:5%\">:"+result[2]+"<img src=\"img/etc/Icon_acc.png\" style=\"width:5%\">:"+result[1]+"<img src=\"img/etc/Icon_rof.png\" style=\"width:5%\">:"+result[3]+"</td></tr>");for(i in RF)num=getOneTypeCount(arr,RF[i]),result=getFinalValue(num,RF[i]),"avg"==i?$("#result").append("<tr><td><img src=\"img/etc/rf.png\"></td><td>"+num+"</td><td><img src=\"img/etc/Icon_dmg_b.png\" style=\"width:5%\">\ud654\ub825:"+result[0]+"<img src=\"img/etc/Icon_eva_b.png\" style=\"width:5%\">\ud68c\ud53c:"+result[2]+"<img src=\"img/etc/Icon_acc_b.png\" style=\"width:5%\">\uba85\uc911:"+result[1]+"<img src=\"img/etc/Icon_rof_b.png\" style=\"width:5%\">\uc0ac\uc18d:"+result[3]+"</td></tr>"):$("#result").append("<tr><td>"+i+"</td><td>"+num+"</td><td><img src=\"img/etc/Icon_dmg.png\" style=\"width:5%\">:"+result[0]+"<img src=\"img/etc/Icon_eva.png\" style=\"width:5%\">:"+result[2]+"<img src=\"img/etc/Icon_acc.png\" style=\"width:5%\">:"+result[1]+"<img src=\"img/etc/Icon_rof.png\" style=\"width:5%\">:"+result[3]+"</td></tr>");for(i in AR)num=getOneTypeCount(arr,AR[i]),result=getFinalValue(num,AR[i]),"avg"==i?$("#result").append("<tr><td><img src=\"img/etc/ar.png\"></td><td>"+num+"</td><td><img src=\"img/etc/Icon_dmg_b.png\" style=\"width:5%\">\ud654\ub825:"+result[0]+"<img src=\"img/etc/Icon_eva_b.png\" style=\"width:5%\">\ud68c\ud53c:"+result[2]+"<img src=\"img/etc/Icon_acc_b.png\" style=\"width:5%\">\uba85\uc911:"+result[1]+"<img src=\"img/etc/Icon_rof_b.png\" style=\"width:5%\">\uc0ac\uc18d:"+result[3]+"</td></tr>"):$("#result").append("<tr><td>"+i+"</td><td>"+num+"</td><td><img src=\"img/etc/Icon_dmg.png\" style=\"width:5%\">:"+result[0]+"<img src=\"img/etc/Icon_eva.png\" style=\"width:5%\">:"+result[2]+"<img src=\"img/etc/Icon_acc.png\" style=\"width:5%\">:"+result[1]+"<img src=\"img/etc/Icon_rof.png\" style=\"width:5%\">:"+result[3]+"</td></tr>");for(i in MG)num=getOneTypeCount(arr,MG[i]),result=getFinalValue(num,MG[i]),"avg"==i?$("#result").append("<tr><td><img src=\"img/etc/mg.png\"></td><td>"+num+"</td><td><img src=\"img/etc/Icon_dmg_b.png\" style=\"width:5%\">\ud654\ub825:"+result[0]+"<img src=\"img/etc/Icon_eva_b.png\" style=\"width:5%\">\ud68c\ud53c:"+result[2]+"<img src=\"img/etc/Icon_acc_b.png\" style=\"width:5%\">\uba85\uc911:"+result[1]+"<img src=\"img/etc/Icon_rof_b.png\" style=\"width:5%\">\uc0ac\uc18d:"+result[3]+"</td></tr>"):$("#result").append("<tr><td>"+i+"</td><td>"+num+"</td><td><img src=\"img/etc/Icon_dmg.png\" style=\"width:5%\">:"+result[0]+"<img src=\"img/etc/Icon_eva.png\" style=\"width:5%\">:"+result[2]+"<img src=\"img/etc/Icon_acc.png\" style=\"width:5%\">:"+result[1]+"<img src=\"img/etc/Icon_rof.png\" style=\"width:5%\">:"+result[3]+"</td></tr>");return!1});
// battery by kosehy
var arrCom=["1com","2com","3com","4com","5com","6com","7com","8com","9com","10com"],
	arrSet=["1set","2set","3set","4set","5set","6set","7set","8set","9set","10set"],
	arrPet=["1pet","2pet","3pet","4pet","5pet","6pet","7pet","8pet","9pet","10pet"],
	arrTcom=["1tcom","2tcom","3tcom","4tcom","5tcom","6tcom","7tcom","8tcom","9tcom","10tcom"],
	arrTnr=[0,50,85,95,99,101,102,102,102.5,103,103.5],
	i;
for (i=0;i<arrCom.length;i++)
	{
		document.getElementById(arrCom[i]).addEventListener("keyup",sumComfort);
		document.getElementById(arrSet[i]).addEventListener("keyup",sumComfort);
		document.getElementById(arrPet[i]).addEventListener("keyup",sumComfort);
		document.getElementById(arrTcom[i]).addEventListener("keyup",sumComfort);
	}
var totalCom=0,
	totalTcom=0,
	numOfroom=0,
	totalBr=0,
	averageTbr=0;
function sumComfort(){
	for (i=0;i<arrCom.length;i++)
	{
		totalCom=Number(document.getElementById(arrCom[i]).value)+Number(document.getElementById(arrSet[i]).value)+Number(document.getElementById(arrPet[i]).value);
		document.getElementById(arrTcom[i]).value=totalCom;
		totalCom=0;
		totalTcom=totalTcom+Number(document.getElementById(arrTcom[i]).value);
		document.getElementById("tTcom").innerText=totalTcom;
		if(document.getElementById(arrCom[i]).value!=0)
		{
			numOfroom=i+1;
			document.getElementById("tnr").innerText=numOfroom;
		}
	}
	totalBr=11*totalTcom/10000+(-0.1*totalTcom*totalTcom/10000/10000)+arrTnr[Number(numOfroom)-1];
	document.getElementById("tbr").innerText=totalBr.toFixed(2);
	averageTbr=(11*(totalTcom+1000))/10000+(-0.1*((totalTcom+1000)*(totalTcom+1000))/10000/10000)-((11*totalTcom/10000)+(-0.1*(totalTcom*totalTcom)/10000/10000));
	document.getElementById("abtr").innerText=averageTbr.toFixed(2);
	averageTbr=0;
	totalTcom=0;
}